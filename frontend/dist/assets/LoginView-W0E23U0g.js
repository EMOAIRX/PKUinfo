import{u as m,s as f,b as w,d as g,e as h,r as x,o as v,c as y,a as e,w as u,v as i,f as _,g as b}from"./index-CjEgMWgq.js";import{e as k}from"./aes-DsZpYOOY.js";const q={class:"grow flex flex-col space-y-4 justify-center items-center h-full"},S=e("h1",{class:"text-2xl font-bold"},"登录",-1),B={class:"input input-bordered flex items-center gap-2"},C=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[e("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM12.735 14c.618 0 1.093-.561.872-1.139a6.002 6.002 0 0 0-11.215 0c-.22.578.254 1.139.872 1.139h9.47Z"})],-1),M={class:"input input-bordered flex items-center gap-2"},V=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[e("path",{"fill-rule":"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z","clip-rule":"evenodd"})],-1),Z={class:"flex flex-row justify-center items-center space-x-4"},U={__name:"LoginView",setup(I){const c=m(),{loginStatus:p}=f(c),n=w(),l=g(),a=h();console.log(a.query.username);const o=x({username:a.query.username?a.query.username:"",password:""});function d(){b.post("/login",{username:o.username,password:k(o.password)}).then(s=>{if(sessionStorage.setItem("auth",JSON.stringify(s.data)),console.log(s.data),s.data.code===200)if(p.value=!0,sessionStorage.setItem("token",s.data.data.token),n.success("登录成功",{timeout:2e3}),a.query.redirect){const t=a.query.redirect;l.push({path:t})}else l.push("/");else n.error("用户名或密码错误",{timeout:2e3})}).catch(s=>{console.log(s),n.error("登录失败",{timeout:2e3})})}return(s,t)=>(v(),y("div",q,[S,e("label",B,[C,u(e("input",{type:"text",class:"grow",placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=r=>o.username=r)},null,512),[[i,o.username]])]),e("label",M,[V,u(e("input",{type:"password",class:"grow","onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r)},null,512),[[i,o.password]])]),e("div",Z,[e("button",{class:"btn btn-primary px-6 text-primary-content",onClick:d},"登录"),e("button",{class:"btn btn-neutral px-6",onClick:t[2]||(t[2]=r=>_(l).push("/register"))},"注册")])]))}};export{U as default};
